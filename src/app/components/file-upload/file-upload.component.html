<div class="file-upload-container">
	<!-- Drop Zone -->
	<div
		class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center transition-colors duration-200 mb-4"
		[class.border-blue-500]="isDragOver()"
		[class.bg-blue-50]="isDragOver()"
		(dragover)="onDragOver($event)"
		(dragleave)="onDragLeave($event)"
		(drop)="onDrop($event)">
		<!-- Hidden file inputs -->
		<input
			type="file"
			#fileInput
			multiple
			class="hidden"
			(change)="onFileSelected($event)" />
		<input
			type="file"
			#folderInput
			multiple
			webkitdirectory
			class="hidden"
			(change)="onFolderSelected($event)" />

		<div class="space-y-3">
			<div
				class="w-12 h-12 mx-auto bg-gray-100 rounded-full flex items-center justify-center">
				<i class="fa-solid fa-cloud-upload-alt text-2xl text-gray-400"></i>
			</div>
			<div>
				<p class="text-sm font-medium text-gray-900">
					Drop files or a folder here to upload
				</p>
				<p class="text-xs text-gray-500 mt-1">
					Supports individual files and entire folders
				</p>
			</div>
			<div class="flex flex-col sm:flex-row gap-2 justify-center">
				<button
					class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors text-sm"
					(click)="openFileDialog()">
					Choose Files
				</button>
				<button
					class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors text-sm"
					(click)="openFolderDialog()">
					Choose Folder
				</button>
			</div>
		</div>
	</div>

	<!-- Uploading Files List -->
	@if (uploadingFiles().length > 0) {
	<div class="space-y-3">
		<h4 class="text-sm font-medium text-gray-900">Uploading Files</h4>
		@for ( uploadingFile of uploadingFiles(); track uploadingFile.file.name ) {
		<div class="bg-white rounded-lg p-4 border border-gray-200">
			<div class="flex items-center justify-between mb-2">
				<div class="flex items-center space-x-3">
					<i [class]="getFileIcon(uploadingFile.file.name) + ' ' + getFileColor(uploadingFile.file.name)" class="text-lg"></i>
					<div>
						<p class="text-sm font-medium text-gray-900">
							{{ uploadingFile.file.name }}
						</p>
						<p class="text-xs text-gray-500">
							{{ formatFileSize(uploadingFile.file.size) }}
						</p>
					</div>
				</div>
				<div class="text-right">
					@if (uploadingFile.status === 'uploading') {
					<span class="text-xs text-blue-600 font-medium"
						>{{ uploadingFile.progress }}%</span
					>
					} @else if (uploadingFile.status === 'completed') {
					<span class="text-xs text-green-600 font-medium">Complete</span>
					} @else {
					<span class="text-xs text-red-600 font-medium">Failed</span>
					}
				</div>
			</div>

			@if (uploadingFile.status === 'uploading') {
			<div class="w-full bg-gray-200 rounded-full h-2">
				<div
					class="bg-blue-600 h-2 rounded-full transition-all duration-300"
					[style.width.%]="uploadingFile.progress"></div>
			</div>
			} @else if (uploadingFile.status === 'completed') {
			<div class="w-full bg-green-200 rounded-full h-2">
				<div class="bg-green-600 h-2 rounded-full w-full"></div>
			</div>
			} @else {
			<div class="w-full bg-red-200 rounded-full h-2">
				<div class="bg-red-600 h-2 rounded-full w-full"></div>
			</div>
			}
		</div>
		}
	</div>
	}
</div>
